## hdfs backup tools                                                                                                                                                                                            hdfs 备份工具,会把生产环境的hdfs数据(天为单位)备份到存储机器(现10.0.0.146)备份时需要设置备份类型,需要备份的日期.在conf.json 配置备份树结构,叶子节点为备份搜索的基本单位.每个叶子几点必须保存两个属性,`hdfs-src`和`remote`,分别代表备份源路径和远程目标路径如在conf.json 定义了如下```{	"source" : {		"tracking" : {			"hdfs-src" : "/production/source/tracking",			"remote" : "root@10.0.0.147:/root/backup/hdfs/production/source/tracking"		}		"comments" : {			"hdfs-src" : "/production/source/comments",			"remote" : "root@10.0.0.147:/root/backup/hdfs/production/source/comments"		}	}}```如下命令代表执行source.tracking备份,程序会搜索source.tracking指定的hdfs-src路径下的所有日期文件或目录,并以最外面一层作为备份压缩单位```python run.py -s 2015-11-11 -e 2015-11-11 -t source.tracking ```备份类型可以不为叶子节点,此时备份类型为指定节点下的所有叶子节点,如:```python run.py -k 30 -t source```### usage:```Options:  -h, --help            show this help message and exit  -s YYYY-mm-dd, --start=YYYY-mm-dd                        backup start date, in %Y-%m-%d format  -e YYYY-mm-dd, --end=YYYY-mm-dd                        backup end date, in %Y-%m-%d format  -k int, --keep=int    keep only the most recent k day file, backup the old                        file(-s and -t options would be ignored)  -c conf.json, --conf=conf.json                        config file, setting the backup hdfs-src path and                        remote target path  -t AAA.BBB.CCC, --type=AAA.BBB.CCC                        backup data type, should be in XX.XXX.XX format, such                        as source.tracking.xtx  -d, --delete          switch on generate delte script```### example:1. backup the source.tracking data between 2015-09-01 to 2015-10-01```python run.py -s 2015-09-01 -e 2015-10-01 -t source.tracking```2. 只保留source最近10天 ,其余拉走备份```python run.py -k 10 -t source```3. 备份截止到2015-10-10 的datas.tracking数据```python run.py -e 2015-10-10 data.tracking```4. 在备份同时生成删除脚本(-d)```python run.py -s 2015-10-01 -t 2015-11-01 -d```### about conf.json:conf.json 的叶子节点必须保存着hdfs-src,remote两个参数,分别代表备份源路径和备份目标路径.备份类型为json中键值,例如 source.tracking, source, datas, datas.tracking 都为合法键值若备份类型不为叶子节点,则会遍历其所有的子节点,例如给出 source 时, source.tracking 和 source.comments 两种都会备份